# =============================================================================
# 轻量级实验配置
# Lightweight Experiment Configuration
# =============================================================================
# 用于快速测试和资源受限环境

physics:
  n_modes: 10                    # 减少 Zernike 模式数
  pupil_size: 32                 # 减小光瞳网格
  kernel_size: 17                # 更小的 PSF 核
  oversample_factor: 1           # 不过采样
  ref_wavelength: 550.0e-9
  wavelengths:
    - 550.0e-9                   # 仅单通道（灰度）

ola:
  patch_size: 64                 # 更小的补丁
  stride: 32
  pad_to_power_2: true
  use_newbp: true

aberration_net:
  n_coeffs: 10
  a_max: 2.0
  type: "polynomial"
  polynomial:
    degree: 1                    # 最简单的线性模型
  mlp:
    hidden_dim: 32
    use_fourier: false           # 关闭傅里叶编码
    fourier_scale: 5
    a_max_mlp: 2.0

restoration_net:
  n_channels: 1                  # 灰度图
  n_classes: 1
  base_filters: 32               # 减半
  bilinear: true
  use_coords: false              # 关闭坐标注入

training:
  optimizer:
    type: "adamw"
    lr_restoration: 2.0e-4
    lr_optics: 2.0e-5
    weight_decay: 0.01
  loss:
    lambda_sup: 0.0
    lambda_coeff: 0.02
    lambda_smooth: 0.05
  gradient_clip:
    restoration: 5.0
    optics: 1.0
  smoothness_grid_size: 8

data:
  batch_size: 8
  image_height: 128
  image_width: 128
  num_workers: 2

experiment:
  name: "lightweight"
  seed: 42
  device: "cuda"
  epochs: 50
  save_interval: 10
  log_interval: 1
  output_dir: "results/lightweight"
